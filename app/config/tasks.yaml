#--------------------------------------------------
# CV Reader Task
#--------------------------------------------------
cv_reader_task:
  description: >
    Execute the PDFReaderTool to convert the pdf files to txt file located at this folder: {file_path} one by one, then save the cleaned text to {txt_output_path}.
  expected_output: >
    A clean plain text version of each CV file saved in the specified output directory.
  
  agent: cv_reader

#--------------------------------------------------
# CV JSON Builder Task
#--------------------------------------------------
cv_json_builder_task:
  description: >
    Read the cleaned CV text file from the directory {txt_output_path} and
    convert each CV text into a structured JSON profile that matches the
    CVData schema. For every .txt CV file found, create a corresponding
    .json file in the same or specified output directory.

    Use the CV content to extract:
    - personal_info (name, email, phone, location if available)
    - summary
    - skills (grouped into technical/soft if possible)
    - experience (job title, company, dates, bullets)
    - education
    - certifications
    - projects
    - languages
    - side_notes (any leftover info)

    Keep "source_file" equal to the original CV file name, and save it in the (/preprocessed-CVs) folder.
  expected_output: >
    A JSON file per CV text found, each conforming to the CVData schema.
  agent: cv_json_builder

#--------------------------------------------------
# Task: Check Candidate Eligibility
#--------------------------------------------------
check_candidate_eligibility_task:
  description: >
    Compare the candidate profile JSON (CVData) with the job description JSON.
    Determine if the candidate is appropriate for this job.

    Steps to follow:
    1. Read the candidate JSON (fields: personal_info, summary, skills,
       experience, education, certifications, languages).
    2. Read the job description JSON (fields: must_have_skills, nice_to_have_skills,
       experience_required_years, education_required, location).
    3. Check must-have skills: if any are completely missing from the candidate, flag them.
    4. Check experience: compare candidate total relevant years to job requirement.
    5. Check education: if the JD requires a specific degree and the candidate doesn't have it, flag it.
    6. Based on these checks, decide: "APPROPRIATE" or "NOT APPROPRIATE".

    This task is part of an automated HR pipeline and the output will be used
    to filter candidates before human review.
    {jd_file_path} contains the job description JSON file path.
    and store the result in a json file.
    and save the output file to (/results) folder.
  expected_output: >
    A JSON object with the following structure:
    
      "decision": "APPROPRIATE" | "NOT_APPROPRIATE",
      "match_score": <number 0-100>,
      "missing_must_have_skills": [],
      "missing_education": false,
      "experience_gap_years": 0,
      "notes": "short explanation of the decision"
    
  agent: cv_eligibility_checker
